<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì¹˜ì§€ì§ ì‹œê°„í‘œ</title>
    <link rel="stylesheet" href="popup.css" />
    <style>
      /* ì¶”ê°€ ìŠ¤íƒ€ì¼ */
      .loading {
        text-align: center;
        padding: 40px 20px;
        color: #999;
      }

      .loading-icon {
        font-size: 48px;
        margin-bottom: 10px;
      }

      .week-info {
        background: #1a1a1a;
        padding: 10px;
        margin: 10px 0;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        font-size: 14px;
        color: #e0e0e0;
      }

      .week-range {
        flex: 1;
        text-align: center;
      }

      .week-nav-btn {
        background: #2a2a2a;
        border: 1px solid #444;
        border-radius: 4px;
        padding: 4px 10px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s;
        min-width: 32px;
        color: #e0e0e0;
      }

      .week-nav-btn:hover {
        background: #3a3a3a;
        border-color: #666;
      }

      .week-nav-btn:disabled {
        background: #1a1a1a;
        color: #555;
        cursor: not-allowed;
        border-color: #333;
      }

      .timetable-main {
        position: relative;
        margin: 15px 0;
      }

      .timetable-image {
        width: 100%;
        max-width: 360px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
      }

      .vote-container {
        display: flex;
        justify-content: space-around;
        align-items: center;
        margin: 15px 0;
        padding: 10px;
        background: #1a1a1a;
        border-radius: 8px;
      }

      .vote-btn {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
        padding: 10px 20px;
        border: 2px solid #333;
        background: #2a2a2a;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
        color: #e0e0e0;
      }

      .vote-btn:hover {
        background: #3a3a3a;
        border-color: #444;
      }

      .vote-btn.active-like {
        border-color: #4CAF50;
        background: #1a3a1a;
      }

      .vote-btn.active-dislike {
        border-color: #f44336;
        background: #3a1a1a;
      }

      .vote-icon {
        font-size: 24px;
      }

      .vote-count {
        font-size: 18px;
        font-weight: bold;
      }

      .timetable-thumbnails {
        display: flex;
        gap: 10px;
        overflow-x: auto;
        padding: 10px 0;
        margin: 15px 0;
      }

      .thumbnail {
        flex-shrink: 0;
        width: 100px;
        height: 100px;
        border-radius: 5px;
        cursor: pointer;
        border: 3px solid transparent;
        transition: all 0.2s;
        object-fit: cover;
      }

      .thumbnail:hover {
        border-color: #00bcd4;
      }

      .thumbnail.active {
        border-color: #00bcd4;
        box-shadow: 0 0 10px rgba(0, 188, 212, 0.5);
      }

      .thumbnail-container {
        position: relative;
        flex-shrink: 0;
      }

      .thumbnail-score {
        position: absolute;
        bottom: 5px;
        right: 5px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 2px 6px;
        border-radius: 3px;
        font-size: 11px;
      }

      .upload-section {
        margin: 20px 0;
        padding: 15px;
        background: #1a1a1a;
        border-radius: 8px;
      }

      .upload-section h3 {
        margin: 0 0 10px 0;
        font-size: 14px;
        color: #e0e0e0;
      }

      .upload-input {
        width: 100%;
        padding: 8px;
        border: 1px solid #333;
        border-radius: 4px;
        margin-bottom: 10px;
        background: #2a2a2a;
        color: #e0e0e0;
      }

      .upload-btn {
        width: 100%;
        padding: 10px;
        background: #00bcd4;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
      }

      .upload-btn:hover {
        background: #0097a7;
      }

      .upload-btn:disabled {
        background: #555;
        cursor: not-allowed;
      }

      .info-text {
        font-size: 12px;
        color: #999;
        margin-top: 5px;
      }

      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: #666;
      }

      .empty-state-icon {
        font-size: 48px;
        margin-bottom: 10px;
      }

      .uploader-info {
        font-size: 12px;
        color: #999;
        text-align: center;
        margin-top: 10px;
      }

      .report-btn,
      .delete-btn {
        padding: 5px 15px;
        background: transparent;
        border: 1px solid #444;
        border-radius: 4px;
        color: #999;
        cursor: pointer;
        font-size: 12px;
        transition: all 0.2s;
      }

      .report-btn:hover {
        background: #2a2a2a;
        border-color: #ff9800;
        color: #ff9800;
      }

      .delete-btn {
        border-color: #f44336;
        color: #f44336;
      }

      .delete-btn:hover {
        background: #3a1a1a;
        border-color: #ff5555;
      }

      /* ì´ë¯¸ì§€ í´ë¦­ ê°€ëŠ¥ í‘œì‹œ */
      .timetable-image {
        cursor: pointer;
        transition: opacity 0.2s;
      }

      .timetable-image:hover {
        opacity: 0.9;
      }

      .thumbnail {
        cursor: pointer;
      }

      /* Input placeholder */
      .upload-input::placeholder {
        color: #666;
      }

      /* ì•ˆë‚´ í™”ë©´ (ì¹˜ì§€ì§ í˜ì´ì§€ê°€ ì•„ë‹ ë•Œ) */
      #guideScreen {
        display: none;
        text-align: center;
        padding: 60px 20px;
      }

      .guide-icon {
        font-size: 64px;
        margin-bottom: 20px;
        animation: bounce 2s infinite;
      }

      @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }

      .guide-title {
        font-size: 18px;
        font-weight: bold;
        color: #e0e0e0;
        margin-bottom: 15px;
      }

      .guide-description {
        font-size: 14px;
        color: #999;
        line-height: 1.6;
        margin-bottom: 20px;
      }

      .guide-steps {
        text-align: left;
        background: #1a1a1a;
        padding: 15px 20px;
        border-radius: 8px;
        border: 1px solid #222;
        margin-top: 20px;
      }

      .guide-steps li {
        color: #e0e0e0;
        margin-bottom: 10px;
        font-size: 13px;
      }

      .guide-steps li:last-child {
        margin-bottom: 0;
      }

      /* Buy me a coffee ë²„íŠ¼ */
      .bmc-button {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 14px;
        background: #FFDD00;
        color: #000000 !important;
        border: 2px solid #000000;
        border-radius: 6px;
        text-decoration: none;
        font-size: 13px;
        font-weight: bold;
        transition: all 0.2s;
        cursor: pointer;
        margin-top: 8px;
      }

      .bmc-button span {
        color: #000000;
      }

      .bmc-button:hover {
        background: #FFED4E;
        color: #000000 !important;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(255, 221, 0, 0.3);
      }

      .bmc-button:active {
        transform: translateY(0);
      }

      .footer-links {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ì¹˜ì§€ì§ ì‹œê°„í‘œ</h1>

      <div id="channelInfo">
        <p>ì±„ë„: <span id="channelName">ë¡œë”© ì¤‘...</span></p>
        <p style="font-size: 12px; color: #999;">
          ID: <span id="channelId">...</span>
        </p>
      </div>

      <!-- ì•ˆë‚´ í™”ë©´ (ì¹˜ì§€ì§ í˜ì´ì§€ê°€ ì•„ë‹ ë•Œ) -->
      <div id="guideScreen">
        <div class="guide-icon">ğŸ“º</div>
        <h2 class="guide-title">ì¹˜ì§€ì§ ë°©ì†¡ í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•´ì£¼ì„¸ìš”!</h2>
        <p class="guide-description">
          ì´ í™•ì¥ í”„ë¡œê·¸ë¨ì€ ì¹˜ì§€ì§ ìŠ¤íŠ¸ë¦¬ë¨¸ì˜ ì‹œê°„í‘œë¥¼ ê³µìœ í•˜ê³ <br>
          í™•ì¸í•  ìˆ˜ ìˆëŠ” ì»¤ë®¤ë‹ˆí‹° ê¸°ë°˜ ë„êµ¬ì…ë‹ˆë‹¤.
        </p>
        <div class="guide-steps">
          <ol>
            <li>ğŸ® ì¹˜ì§€ì§(chzzk.naver.com)ì— ì ‘ì†í•˜ì„¸ìš”</li>
            <li>ğŸ¯ ì›í•˜ëŠ” ìŠ¤íŠ¸ë¦¬ë¨¸ì˜ ë°©ì†¡ í˜ì´ì§€ë¡œ ì´ë™í•˜ì„¸ìš”</li>
            <li>âœ¨ ì´ í™•ì¥ í”„ë¡œê·¸ë¨ ì•„ì´ì½˜ì„ ë‹¤ì‹œ í´ë¦­í•˜ì„¸ìš”</li>
            <li>ğŸ“… ì‹œê°„í‘œë¥¼ í™•ì¸í•˜ê±°ë‚˜ ìƒˆë¡œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!</li>
          </ol>
        </div>
      </div>

      <div class="week-info">
        <button id="prevWeekBtn" class="week-nav-btn" title="ì´ì „ ì£¼">â—€</button>
        <span class="week-range">ğŸ“… <span id="weekRange">ë¡œë”© ì¤‘...</span></span>
        <button id="nextWeekBtn" class="week-nav-btn" title="ë‹¤ìŒ ì£¼">â–¶</button>
      </div>

      <!-- ë¡œë”© ìƒíƒœ -->
      <div id="loadingState" class="loading">
        <div class="loading-icon">â³</div>
        <p>ì‹œê°„í‘œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
      </div>

      <!-- ì‹œê°„í‘œ í‘œì‹œ ì˜ì—­ -->
      <div id="timetableView" style="display: none;">
        <!-- ë©”ì¸ ì‹œê°„í‘œ -->
        <div class="timetable-main">
          <img id="mainTimetable" class="timetable-image" src="" alt="ì‹œê°„í‘œ" />
        </div>

        <!-- ì¢‹ì•„ìš”/ì‹«ì–´ìš” -->
        <div class="vote-container">
          <button id="likeBtn" class="vote-btn">
            <span class="vote-icon">ğŸ‘</span>
            <span class="vote-count" id="likeCount">0</span>
          </button>
          <button id="dislikeBtn" class="vote-btn">
            <span class="vote-icon">ğŸ‘</span>
            <span class="vote-count" id="dislikeCount">0</span>
          </button>
        </div>

        <div class="uploader-info">
          <span id="uploaderInfo">ì—…ë¡œë”: ìµëª…</span> â€¢
          <span id="uploadTime">ë°©ê¸ˆ ì „</span>
        </div>

        <div style="display: flex; gap: 10px; justify-content: center;">
          <button id="deleteBtn" class="delete-btn" style="display: none;">ğŸ—‘ï¸ ë‚´ê°€ ë“±ë¡í•œ ì‹œê°„í‘œ ì‚­ì œ</button>
          <button id="reportBtn" class="report-btn">ğŸš¨ ì˜ëª»ëœ ì‹œê°„í‘œ ì‹ ê³ </button>
        </div>

        <!-- ë‹¤ë¥¸ ì‹œê°„í‘œ (ì¸ë„¤ì¼) -->
        <div id="thumbnailsSection" style="display: none;">
          <h3 style="font-size: 14px; margin: 15px 0 5px 0; color: #e0e0e0;">
            ë‹¤ë¥¸ ì‹œê°„í‘œ (<span id="thumbnailCount">0</span>ê°œ)
          </h3>
          <div id="thumbnails" class="timetable-thumbnails"></div>
        </div>
      </div>

      <!-- ë¹ˆ ìƒíƒœ -->
      <div id="emptyState" class="empty-state" style="display: none;">
        <div class="empty-state-icon">ğŸ“‹</div>
        <p>ì´ë²ˆ ì£¼ ì‹œê°„í‘œê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        <p style="font-size: 12px; color: #999;">
          ì•„ë˜ì—ì„œ ì‹œê°„í‘œë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”!
        </p>
      </div>

      <!-- ì‹œê°„í‘œ ë“±ë¡ -->
      <div class="upload-section">
        <h3>â• ì‹œê°„í‘œ ë“±ë¡í•˜ê¸°</h3>
        <input
          type="text"
          id="imageUrlInput"
          class="upload-input"
          placeholder="ì‹œê°„í‘œ ì´ë¯¸ì§€ URL (https://...)"
        />
        <button id="uploadBtn" class="upload-btn">ë“±ë¡í•˜ê¸°</button>
        <p class="info-text">
          â„¹ï¸ ëˆ„êµ¬ë‚˜ ì‹œê°„í‘œë¥¼ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.
        </p>
      </div>

      <!-- í‘¸í„° -->
      <div class="footer" style="margin-top: 20px; padding-top: 10px; border-top: 1px solid #222;">
        <div class="footer-links">
          <p style="font-size: 12px; color: #999; text-align: center; margin: 0;">
            <a href="#" id="backupCodeLink" style="color: #00bcd4;">ë°±ì—… ì½”ë“œ ë³´ê¸°</a>
            <span id="adminLinkSeparator" style="display: none; margin: 0 8px;">â€¢</span>
            <a href="#" id="adminPageLink" style="color: #03c75a; display: none;">ğŸ”§ ê´€ë¦¬ì í˜ì´ì§€</a>
          </p>
          <a href="https://buymeacoffee.com/wd70" target="_blank" class="bmc-button">
            <span>â˜•</span>
            <span>Buy me a coffee</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Firebase SDK (ìˆœì„œ ì¤‘ìš”!) -->
    <script src="firebase-sdk/firebase-app-compat.js"></script>
    <script src="firebase-sdk/firebase-auth-compat.js"></script>
    <script src="firebase-sdk/firebase-firestore-compat.js"></script>

    <!-- Firebase ì„¤ì • ë° ì„œë¹„ìŠ¤ -->
    <script src="firebase-config.js"></script>
    <script src="utils.js"></script>
    <script src="firebase-service.js"></script>

    <!-- ê´€ë¦¬ì ì„¤ì • -->
    <script src="admin-config.js"></script>

    <!-- ì•± ë¡œì§ -->
    <script src="popup.js"></script>
  </body>
</html>
